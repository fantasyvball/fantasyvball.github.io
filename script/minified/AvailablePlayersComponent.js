import PlayerCard from"./PlayerCardComponent.js";export default{template:'<div class="alert alert-info mt-3 position-relative" role="alert">Players with a <sup>?</sup> symbol in their name are from schools that haven\'t announced their official roster for 2023. Please note that the information on these player cards is subject to change and may be removed once the official rosters are announced.</div><div v-if="noAddError" class="alert alert-danger mt-3" role="alert">Player is not added because roster is full. (max:10 players)<button type="button" class="btn-close position-absolute end-0" @click="noAddError = false"></button></div><div class="container"><h1>Top Players</h1><div class="row"><div class="col-md-3"><div class="mb-3"><label for="searchFilter">Search by Name:</label><input id="searchFilter" class="form-control" type="text" v-model="searchQuery" placeholder="Enter player name..."></div></div><div class="col-md-3"><div class="mb-3"><label for="statsKey">Stats:</label><select id="statsKey" class="form-select"><option value="kill">Kills</option><option value="pct">Kill%</option><option value="block">Blocks</option><option value="assist">Assists</option><option value="dig">Digs</option><option value="ace">Aces</option></select></div></div><div class="col-md-3"><div class="mb-3"><label for="sortKey">Sort by:</label><select id="sortKey" class="form-select" v-model="sortKey"><option value="Name">Name</option><option value="Position">Position</option><option value="School">School</option><option value="Year">School Level</option><option value="Points">Points</option><option value="NO">Jersey Number</option><option value="Height">Height</option></select></div></div><div class="col-md-3"><div class="mb-3"><label for="perPage">Results per page:</label><select id="perPage" class="form-select" v-model="perPage"><option value="5">5</option><option value="10">10</option><option value="15">15</option></select></div></div><div class="row"><div class="col-md-4"><div class="mb-3"><label for="selectedSchools">Conferences/Schools:</label><select id="selectedSchools" multiple v-model="selectedSchools"><option value="all">All Schools</option><option value="conf" disabled>Conferences</option><option v-for="conf in allConf" :key="conf" :value="conf">{{ conf }}</option><option value="sch" disabled>Schools</option><option v-for="school in schools" :key="school" :value="school">{{ school }}</option></select></div></div><div class="col-md-4"><div class="mb-3"><label for="selectedPositions">Positions(color coded):</label><select id="selectedPositions" multiple v-model="selectedPositions"><option value="all">All Positions</option><option disabled>Attackers</option><option value="MB">MB(Baby Blue)</option><option value="OH">OH(Orange)</option><option value="OPP">OPP(Purple)</option><option disabled>Non-Attackers</option><option value="L">L(Lime)</option><option value="S">S(Silver)</option><option value="DS">DS(Denim)</option></select></div></div><div class="col-md-4"><div class="mb-3"><label for="selectedYears">Years:</label><select id="selectedYears" multiple v-model="selectedYears"><option value="all">All Year</option><option v-for="year in years" :key="year" :value="year">{{ year }}</option></select></div></div></div><div class="row"><div v-if="isLoggedIn" class="col-md-6 d-flex align-items-end"><div class="mb-3 form-check"><input id="showOwnedPlayers" class="form-check-input" type="checkbox" v-model="showOwnedPlayers" /><label class="form-check-label" for="showOwnedPlayers">Show owned players</label></div></div><div class="col-md-6"><div class="mb-3 form-check"><input id="collapseAll" class="form-check-input" type="checkbox" v-model="collapseAll" @change="onCollapseAllChange"/><label class="form-check-label" for="collapseAll">Collapse All</label></div></div></div></div><div v-if="isLoading"><div class="loading-container" style="justify-content: center; align-items: center;"><div class="spinner-border text-primary" role="status"><span class="sr-only">Loading...</span></div><p class="ml-2">Your data is loading... Please wait.</p></div></div><div v-else><div class="row"><div class="col-md-12"><div v-for="player in filteredList" :key="player.Name"><PlayerCard :player="player" :class="getPlayerCardClass(player)" :collapse="collapseAll"><div><button v-if="isLoggedIn && !owned(player)" class="btn btn-primary me-2" @click="addPlayer(player)">Add</button><button v-if="isLoggedIn && isDroppable(player)" class="btn btn-danger me-2" @click="releasePlayer(player)">Release</button></div></PlayerCard><br /></div></div></div><div class="row"><div class="col-md-12"><nav aria-label="Page navigation"><ul class="pagination justify-content-center"><li class="page-item" :class="{ \'disabled\': currentPage === 1 }"><button class="page-link" @click="changePage(1)" :disabled="currentPage === 1">First</button></li><li class="page-item" v-for="pageNumber in paginationList" :key="pageNumber" :class="{ \'active\': pageNumber === currentPage }"><button class="page-link" @click="changePage(pageNumber)">{{ pageNumber }}</button></li><li class="page-item" :class="{ \'disabled\': currentPage === totalPages }"><button class="page-link" @click="changePage(totalPages)" :disabled="currentPage === totalPages">Last</button></li></ul></nav></div></div></div></div>\n',components:{PlayerCard:PlayerCard},data:()=>({isLoading:!0,sortKey:"Name",showOwnedPlayers:!0,perPage:5,currentPage:1,totalPages:0,unsortedPlayers:[],ownedPlayers:[],noAddError:!1,schools:[],allConf:["AAC","ACC","ASUN","America East","Atlantic 10","Big 12","Big East","Big Sky","Big South","Big Ten","Big West","C-USA","CAA","DI Independent","Horizon","Ivy League","MAAC","MAC","MEAC","MVC","Mountain West","NEC","OVC","Pac-12","Patriot","SEC","SWAC","SoCon","Southland","Summit League","Sun Belt","WAC","WCC"],positionColorPairs:[["L","lime"],["S","silver"],["DS","denim"],["MB","baby blue"],["OH","orange"],["OPP","purple"]],years:["Fy.","Fr.","R-Fr.","So.","R-So.","Jr.","R-Jr.","Sr.","R-Sr.","Gr."],selectedSchools:[],selectedPositions:[],selectedYears:[],searchQuery:"",collapseAll:!1}),mounted(){this.schools=window.all_school.slice(),this.loadDataFromDB(),setTimeout((()=>{new MultipleSelect("#selectedSchools",{placeholder:"filter school"});const e=new MultipleSelect("#selectedPositions",{placeholder:"filter position"});new MultipleSelect("#selectedYears",{placeholder:"filter year"}),e.$el.children[1].children[1].children[6].classList.add("libero-border"),e.$el.children[1].children[1].children[7].classList.add("setter-border"),e.$el.children[1].children[1].children[8].classList.add("defense-border"),e.$el.children[1].children[1].children[2].classList.add("blocker-border"),e.$el.children[1].children[1].children[3].classList.add("outside-border"),e.$el.children[1].children[1].children[4].classList.add("oppo-border")}),"0")},computed:{isLoggedIn:()=>null!=window.user,filteredList(){this.collapseAll;let e=this.unsortedPlayers.slice();if(0!=this.searchQuery.length&&(e=e.filter((e=>e.Name.toLocaleLowerCase().includes(this.searchQuery.toLocaleLowerCase())))),0!=this.selectedSchools.length&&!this.selectedSchools.includes("all")){let l=[];this.selectedSchools.filter((e=>this.allConf.includes(e))).forEach((e=>{l=l.concat(window.conf_member[e])}));const s=this.selectedSchools.filter((e=>!this.allConf.includes(e)));l=l.concat(s),e=e.filter((e=>l.includes(e.School)))}0==this.selectedPositions.length||this.selectedPositions.includes("all")||(e=e.filter((e=>{const[l,s]=e.Position.split("/");return this.selectedPositions.includes(l)||this.selectedPositions.includes(s)}))),0==this.selectedYears.length||this.selectedYears.includes("all")||(e=e.filter((e=>this.selectedYears.includes(e.Year)))),this.showOwnedPlayers||(e=e.filter((e=>!this.ownedPlayers.includes(e.id)))),e.sort(((e,l)=>{const s=["Fr.","Fy.","R-Fr.","So.","R-So.","Jr.","R-Jr.","Sr.","R-Sr.","Sr.+","Gr."],o=["MB","OH","OPP","L","S","DS"];let t,i;if("Height"===this.sortKey){const[s,o]=e.Height.split("-"),[a,r]=l.Height.split("-");t=-(12*Number(s)+Number(o)),i=-(12*Number(a)+Number(r))}else"Position"===this.sortKey?(t=o.indexOf(e.Position.split("/")[0]),i=o.indexOf(l.Position.split("/")[0])):(t="Year"===this.sortKey?s.indexOf(e.Year):e[this.sortKey],i="Year"===this.sortKey?s.indexOf(l.Year):l[this.sortKey]);const a=s.length;return t=-1===t?a:t,t=""===t?a:t,t=void 0===t?a:t,i=-1===i?a:i,i=""===i?a:i,i=void 0===i?a:i,"string"==typeof t&&"string"==typeof i?t.localeCompare(i):t-i})),this.perPage=parseInt(this.perPage);const l=Math.ceil(e.length/this.perPage);0==l?this.currentPage=1:l<this.currentPage&&(this.currentPage=l),this.totalPages=l;const s=(this.currentPage-1)*this.perPage,o=s+this.perPage;return e=e.slice(s,o),e},paginationList(){this.perPage;let e=Math.max(this.currentPage-2,1),l=Math.min(this.currentPage+2,this.totalPages);for(;l-e<4&&l<this.totalPages;)l++;for(;l-e<4&&e>1;)e--;const s=[];for(let o=e;o<=l;o++)s.push(o);return s}},methods:{changePage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},loadDataFromDB(){this.ownedPlayers=window.secret_list_getter(),window.getAllPlayers().then((e=>{this.unsortedPlayers=e})).catch((e=>{console.log(e),this.unsortedPlayers=[]})).finally((()=>{this.isLoading=!1}))},owned(e){return this.ownedPlayers.includes(e.id)},addPlayer(e){window.secret_list_adder(e.id)?this.ownedPlayers=window.secret_list_getter():this.noAddError=!0},releasePlayer(e){window.secrect_list_dropper(e.id)&&(this.ownedPlayers=window.secret_list_getter())},isDroppable(e){return this.ownedPlayers.indexOf(e.id)>=7},getPlayerCardClass(e){return{"bg-primary":this.ownedPlayers.includes(e.id),"text-white":this.ownedPlayers.includes(e.id)}},onCollapseAllChange(){this.isLoading=!0,setTimeout((()=>{this.isLoading=!1}),0)}}};
